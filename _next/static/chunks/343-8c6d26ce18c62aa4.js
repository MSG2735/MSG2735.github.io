"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[343],{1343:(e,a,t)=>{t.d(a,{GameProvider:()=>w,I:()=>A});var l=t(5155),r=t(2115),n=t(3829),s=t(5556);let c={cardSlide:new s.Howl({src:["/sounds/card-deal.mp3"],volume:.1}),revealCard:new s.Howl({src:["/sounds/card-flip.mp3"],volume:.1}),placeBet:new s.Howl({src:["/sounds/chip-stack.mp3"],volume:.1}),playerWins:new s.Howl({src:["/sounds/win-casino-new.mp3"],volume:.1}),playerLoses:new s.Howl({src:["/sounds/lose-casino-new.mp3"],volume:.1}),gameTie:new s.Howl({src:["/sounds/push.mp3"],volume:.1}),playerBlackjack:new s.Howl({src:["/sounds/blackjack.mp3"],volume:.1}),volumeChange:new s.Howl({src:["/sounds/volume-change.mp3"],volume:.1,preload:!0})},o={cardSlide:.1,revealCard:.1,placeBet:.1,playerWins:.1,playerLoses:.1,gameTie:.1,playerBlackjack:.1,volumeChange:.1};class u{applyVolumeToAllSounds(){Object.entries(c).forEach(e=>{let[a,t]=e,l=o[a];t.volume(l*this.volume)})}play(e){this.enabled&&c[e].play()}playVolumeChange(){this.enabled&&(this.volumeChangeTimeout&&clearTimeout(this.volumeChangeTimeout),this.volumeChangeTimeout=setTimeout(()=>{c.volumeChange.play(),this.volumeChangeTimeout=null},50))}setVolume(e){this.volume=e,this.applyVolumeToAllSounds(),this.playVolumeChange()}enable(){this.enabled=!0,localStorage.setItem("blackjack-soundEffects","true")}disable(){this.enabled=!1,localStorage.setItem("blackjack-soundEffects","false")}constructor(){this.enabled=!1,this.volume=.5,this.volumeChangeTimeout=null,this.enabled="false"!==localStorage.getItem("blackjack-soundEffects"),this.volume=parseFloat(localStorage.getItem("blackjack-volume")||"0.5"),this.applyVolumeToAllSounds()}}let d=new u;window.soundManager=d;let i={deck:[],dealer:{cards:[],bet:0,doubleDown:!1,insurance:!1,insuranceBet:0,isStanding:!1,isBusted:!1,isBlackjack:!1,isSplit:!1},player:{hands:[{cards:[],bet:0,doubleDown:!1,insurance:!1,insuranceBet:0,isStanding:!1,isBusted:!1,isBlackjack:!1,isSplit:!1}],balance:1e3,name:"Player",id:"1"},currentHandIndex:0,gamePhase:"betting",message:"Place your bet to start the game.",gameResult:null,handResults:null,lastBetAmount:0},p={wins:0,losses:0,pushes:0,blackjacks:0,winRate:0,profit:0},g=[],h=[],y=(0,r.createContext)(void 0);function m(e,a){switch(a.type){case"PLACE_BET":{let t=a.payload;if(t<=0||t>e.player.balance)return{...e,message:"Invalid bet amount."};return null==d||d.play("placeBet"),{...e,player:{...e.player,hands:[{cards:[],bet:t,doubleDown:!1,insurance:!1,insuranceBet:0,isStanding:!1,isBusted:!1,isBlackjack:!1,isSplit:!1}],balance:e.player.balance-t},currentHandIndex:0,gamePhase:"playerTurn",message:"Dealing cards...",gameResult:null,lastBetAmount:t}}case"DEAL_INITIAL_CARDS":{let a,t,l,r,s=(0,n.Ul)(6);[a,s]=(0,n.xw)(s,!0),null==d||d.play("cardSlide"),[t,s]=(0,n.xw)(s,!0),null==d||d.play("cardSlide"),[l,s]=(0,n.xw)(s,!0),null==d||d.play("cardSlide"),[r,s]=(0,n.xw)(s,!1),null==d||d.play("cardSlide");let c={...e.player.hands[0],cards:[a,l],isBlackjack:(0,n.ne)({cards:[a,l]})},o={cards:[t,r],bet:0,doubleDown:!1,insurance:!1,insuranceBet:0,isStanding:!1,isBusted:!1,isBlackjack:(0,n.ne)({cards:[t,r]}),isSplit:!1},u=c.isBlackjack,i=o.isBlackjack,p=e.gamePhase,g=a.rank===l.rank?"Hit, stand, double down, or split.":"Hit, stand, or double down.",h=null;if(u){if(i)p="gameOver",g="Both have blackjack - Push (Bet returned)",h="push";else{let e=1.5*c.bet;p="gameOver",g="Blackjack! (+$".concat(Math.floor(e),")"),h="blackjack"}}else i?(p="gameOver",g="Dealer has blackjack (-$".concat(c.bet,")"),h="lose"):p="playerTurn";return{...e,deck:s,player:{...e.player,hands:[c]},dealer:o,gamePhase:p,message:g,gameResult:h}}case"HIT":{let a;let t=e.currentHandIndex,l=e.player.hands[t],r=[...e.deck];[a,r]=(0,n.xw)(r,!0),null==d||d.play("revealCard");let s=[...l.cards,a],c={...l,cards:s,isBusted:(0,n.U_)({...l,cards:s})},o=[...e.player.hands];o[t]=c;let u=e.gamePhase,i=e.message;if(c.isBusted){if(o.every(e=>e.isBusted||e.isStanding))o.every(e=>e.isBusted)?(u="evaluating",i="All hands busted (-$".concat(o.reduce((e,a)=>e+a.bet,0),")")):(u="dealerTurn",i="Busted - Dealer's turn");else{let e=t+1;e<o.length?(u="playerTurn",i="Playing ".concat(e+1).concat(E(e+1)," hand. Hit, stand, or double down.")):(u="dealerTurn",i="Dealer's turn.")}}else{let{total:e}=(0,n.Zd)(c),a=!0;{let e=localStorage.getItem("blackjack-autoStandOn21");if(null!==e)a="false"!==e;else{let e=localStorage.getItem("blackjack-settings");if(e)try{let t=JSON.parse(e);void 0!==t.autoStandOn21&&(a=t.autoStandOn21)}catch(e){console.error("Error parsing settings:",e)}}}if(21===e&&a){if(o[t]={...c,isStanding:!0},o.every(e=>e.isStanding||e.isBusted))u="dealerTurn",i="Player stands with 21. Dealer's turn.";else{let e=t+1;e<o.length&&(u="playerTurn",i="Playing ".concat(e+1).concat(E(e+1)," hand. Hit, stand, or double down."))}}else i=21===e?"You have 21! Hit or Stand?":"Hit or Stand?"}return{...e,deck:r,player:{...e.player,hands:o},currentHandIndex:"playerTurn"===u&&i.includes("Playing")&&i.includes("hand")?t+1:t,gamePhase:u,message:i}}case"STAND":{let a=e.currentHandIndex,t=[...e.player.hands];null==d||d.play("cardSlide"),t[a]={...t[a],isStanding:!0};let l=t.every(e=>e.isStanding||e.isBusted),r=e.gamePhase,n=e.message,s=a;return l?(r="dealerTurn",n="Dealer's turn."):(s=a+1)<t.length?(r="playerTurn",n="Playing ".concat(s+1).concat(E(s+1)," hand. Hit, stand, or double down.")):(r="dealerTurn",n="Dealer's turn."),{...e,player:{...e.player,hands:t},gamePhase:r,message:n,currentHandIndex:s}}case"DOUBLE_DOWN":{let a;let t=e.currentHandIndex,l=e.player.hands[t],r=l.bet;if(2!==l.cards.length)return{...e,message:"Can only double down on first two cards."};if(e.player.balance<r)return{...e,message:"Not enough balance to double down."};let s=localStorage.getItem("blackjack-settings")?JSON.parse(localStorage.getItem("blackjack-settings")||"{}").allowDoubleAfterSplit:n.L6.allowDoubleAfterSplit;if(l.isSplit&&!s)return{...e,message:"Doubling down after split is not allowed."};let c=[...e.deck];[a,c]=(0,n.xw)(c,!0);let o=[...l.cards,a],u={...l,cards:o,bet:2*r,doubleDown:!0,isStanding:!0,isBusted:(0,n.U_)({...l,cards:o})},d=[...e.player.hands];d[t]=u;let i=e.gamePhase,p=e.message,g=t;return d.every(e=>e.isStanding||e.isBusted)?(i="dealerTurn",p="Dealer's turn."):(g=t+1)<d.length?(i="playerTurn",p="Playing ".concat(g+1).concat(E(g+1)," hand. Hit, stand, or double down.")):(i="dealerTurn",p="Dealer's turn."),{...e,deck:c,player:{...e.player,hands:d,balance:e.player.balance-r},gamePhase:i,message:p,currentHandIndex:g}}case"SPLIT":{let a,t;let l=e.player.hands[e.currentHandIndex];if(2!==l.cards.length||l.cards[0].rank!==l.cards[1].rank)return{...e,message:"This hand cannot be split."};if(e.player.balance<l.bet)return{...e,message:"Not enough balance to split."};let r=l.cards[0],s=l.cards[1],c=[...e.deck];[a,c]=(0,n.xw)(c,!0),[t,c]=(0,n.xw)(c,!0);let o={cards:[r,a],bet:l.bet,doubleDown:!1,insurance:!1,insuranceBet:0,isStanding:!1,isBusted:!1,isBlackjack:!1,isSplit:!0},u={cards:[s,t],bet:l.bet,doubleDown:!1,insurance:!1,insuranceBet:0,isStanding:!1,isBusted:!1,isBlackjack:!1,isSplit:!0},d=[...e.player.hands];return d.splice(e.currentHandIndex,1,o,u),{...e,deck:c,player:{...e.player,hands:d,balance:e.player.balance-l.bet},gamePhase:"playerTurn",message:"Playing 1st hand. Hit, stand, or double down."}}case"DEALER_PLAY":{let a=e.dealer.cards.map((e,a)=>1===a?(null==d||d.play("revealCard"),{...e,faceUp:!0}):e),t={...e.dealer,cards:a,isBlackjack:(0,n.ne)({...e.dealer,cards:a})},l=[...e.deck];for(;(0,n.Zd)(t).total<17;){let e;[e,l]=(0,n.xw)(l,!0),t.cards.push(e)}return t.isBusted=(0,n.U_)(t),{...e,deck:l,dealer:t,gamePhase:"evaluating",message:"Evaluating hands..."}}case"EVALUATE_HANDS":{var t;let a=e.player.hands,l=e.dealer,r=0,s=null,c=(null===(t=a[0])||void 0===t?void 0:t.bet)||0,o=[],u=localStorage.getItem("blackjack-settings")?JSON.parse(localStorage.getItem("blackjack-settings")||"{}"):n.L6;if(1===a.length){let{result:e,payout:t}=(0,n.Ld)(a[0],l,u);r=t,s=e}else a.forEach((e,a)=>{let{result:t,payout:s}=(0,n.Ld)(e,l,u);o.push({result:t,payout:s,index:a}),r+=s});let d="";if(1===a.length){let e=a[0].bet,t=r-e;switch(s){case"win":d="You win (+$".concat(t,")");break;case"lose":d="You lose (-$".concat(e,")");break;case"push":d="Push (Bet returned)";break;case"blackjack":d="Blackjack! (+$".concat(t,")")}}else{let a=o.map(e=>{let{result:a,index:t}=e;switch(a){case"win":return"Hand ".concat(t+1,": Win");case"lose":return"Hand ".concat(t+1,": Lose");case"push":return"Hand ".concat(t+1,": Push");case"blackjack":return"Hand ".concat(t+1,": Blackjack!");default:return"Hand ".concat(t+1,": ").concat(a)}}).join(" | "),t=e.player.hands.reduce((e,a)=>e+a.bet,0),l=r-t;d=l>0?"".concat(a," | Total: +$").concat(l):l<0?"".concat(a," | Total: -$").concat(Math.abs(l)):"".concat(a," | Total: Push")}return{...e,player:{...e.player,balance:e.player.balance+r},gamePhase:"gameOver",message:d,gameResult:s,handResults:o,lastBetAmount:c}}case"NEW_GAME":{let a=!0;{let e=localStorage.getItem("blackjack-keepBetBetweenRounds");if(null!==e)a="false"!==e;else{let e=localStorage.getItem("blackjack-settings");if(e)try{let t=JSON.parse(e);void 0!==t.keepBetBetweenRounds&&(a=t.keepBetBetweenRounds)}catch(e){console.error("Error parsing settings:",e)}}}return{...i,player:{...i.player,balance:e.player.balance},lastBetAmount:a?e.lastBetAmount:0}}case"CLEAR_BET":{let a=e.player.hands[0].bet;return{...e,player:{...e.player,hands:[{...e.player.hands[0],bet:0}],balance:e.player.balance+a},message:"Bet cleared. Place your bet to start the game."}}case"UPDATE_BALANCE":{let t=a.payload;return{...e,player:{...e.player,balance:t}}}case"ADD_FUNDS":{let t=a.payload;return{...e,player:{...e.player,balance:e.player.balance+t}}}case"RESET_ALL_DATA":return i;default:return e}}function k(e,a){switch(a.type){case"EVALUATE_HANDS":{if(!a.gameState)return e;let{player:t,dealer:l,gameResult:r}=a.gameState,{wins:s,losses:c,pushes:o,blackjacks:u,winRate:d,profit:i}=e,p=localStorage.getItem("blackjack-settings")?JSON.parse(localStorage.getItem("blackjack-settings")||"{}"):n.L6;if(t.hands.length>1)t.hands.forEach(e=>{let{result:a,payout:t}=(0,n.Ld)(e,l,p),r=t-e.bet;"win"===a?(s++,i+=r):"lose"===a?(c++,i+=r):"push"===a?o++:"blackjack"===a&&(s++,u++,i+=r)});else{if(!r)return e;let a=t.hands[0],{result:d,payout:g}=(0,n.Ld)(a,l,p),h=g-a.bet;"win"===d?(s++,i+=h):"lose"===d?(c++,i+=h):"push"===d?o++:"blackjack"===d&&(s++,u++,i+=h)}let g=s+c+o;return d=g>0?s/g*100:0,{wins:s,losses:c,pushes:o,blackjacks:u,winRate:d,profit:i}}case"NEW_GAME":default:return e;case"LOAD_STATS":{let{wins:e,losses:t,pushes:l,blackjacks:r,profit:n}=a.payload,s=e+t+l;return{wins:e,losses:t,pushes:l,blackjacks:r,winRate:s>0?e/s*100:0,profit:n}}case"RESET_STATS":return p}}function b(e,a){return"UPDATE_SETTINGS"===a.type?{...e,...a.payload}:e}function S(e,a){switch(a.type){case"ADD_MATCH":return[a.payload,...e];case"CLEAR_HISTORY":return[];case"LOAD_HISTORY":return a.payload;default:return e}}function f(e,a){switch(a.type){case"ADD_PURCHASE":return[a.payload,...e];case"CLEAR_PURCHASES":return[];case"LOAD_PURCHASES":return a.payload;default:return e}}function w(e){let{children:a}=e,[t,s]=(0,r.useReducer)(m,function(){try{let e=localStorage.getItem("blackjack-balance");if(e){let a=parseInt(e);return{...i,player:{...i.player,balance:a}}}}catch(e){console.error("Error loading balance from localStorage:",e)}return i}()),[c,o]=(0,r.useReducer)(k,function(){try{let e=localStorage.getItem("blackjack-stats");if(e)return JSON.parse(e)}catch(e){console.error("Error loading stats from localStorage:",e)}return p}()),[u,d]=(0,r.useReducer)(S,function(){try{let e=localStorage.getItem("blackjack-history");if(e)return JSON.parse(e).map(e=>({...e,date:new Date(e.date)}))}catch(e){console.error("Error loading match history from localStorage:",e)}return g}()),[w,A]=(0,r.useReducer)(f,function(){try{let e=localStorage.getItem("blackjack-purchase-history");if(e)return JSON.parse(e).map(e=>({...e,date:new Date(e.date)}))}catch(e){console.error("Error loading purchase history from localStorage:",e)}return h}()),[E,T]=(0,r.useReducer)(b,function(){try{let e=localStorage.getItem("blackjack-settings");if(e){let a=JSON.parse(e);return{...n.L6,...a,autoStandOn21:"false"!==localStorage.getItem("blackjack-autoStandOn21"),keepBetBetweenRounds:"false"!==localStorage.getItem("blackjack-keepBetBetweenRounds")}}}catch(e){console.error("Error loading settings from localStorage:",e)}return n.L6}()),[B,D]=(0,r.useState)(!1),v=(0,r.useCallback)(e=>{"ADD_FUNDS"===e.type&&A({type:"ADD_PURCHASE",payload:{id:Date.now().toString(),date:new Date,amount:e.payload}}),s(e)},[s]);(0,r.useEffect)(()=>{D(!0)},[]),(0,r.useEffect)(()=>{"evaluating"===t.gamePhase&&s({type:"EVALUATE_HANDS"})},[t.gamePhase]),(0,r.useEffect)(()=>{if("dealerTurn"===t.gamePhase){let e=setTimeout(()=>{s({type:"DEALER_PLAY"})},1e3);return()=>clearTimeout(e)}},[t.gamePhase]),(0,r.useEffect)(()=>{"gameOver"===t.gamePhase&&(t.player.hands.forEach((e,a)=>{let l=localStorage.getItem("blackjack-settings")?JSON.parse(localStorage.getItem("blackjack-settings")||"{}"):n.L6,{result:r,payout:s}=(0,n.Ld)(e,t.dealer,l),c=s-e.bet;d({type:"ADD_MATCH",payload:{id:"".concat(Date.now(),"-").concat(a),date:new Date,result:r,playerCards:[...e.cards],dealerCards:[...t.dealer.cards],bet:e.bet,payout:s,profit:c}})}),o({type:"EVALUATE_HANDS",gameState:t}))},[t.gamePhase]),(0,r.useEffect)(()=>{B&&(localStorage.setItem("blackjack-game-state",JSON.stringify(t)),localStorage.setItem("blackjack-game-stats",JSON.stringify(c)),localStorage.setItem("blackjack-settings",JSON.stringify(E)),localStorage.setItem("blackjack-history",JSON.stringify(u)),localStorage.setItem("blackjack-purchase-history",JSON.stringify(w)))},[t.player.balance,c,E,u,w,B]);let j=()=>{s({type:"RESET_ALL_DATA"}),o({type:"RESET_STATS"}),d({type:"CLEAR_HISTORY"}),A({type:"CLEAR_PURCHASES"})};return(0,r.useEffect)(()=>{t===i&&j()},[t]),(0,l.jsx)(y.Provider,{value:{gameState:t,gameStats:c,matchHistory:u,purchaseHistory:w,settings:E,dispatch:v,updateSettings:e=>T({type:"UPDATE_SETTINGS",payload:e})},children:a})}function A(){let e=(0,r.useContext)(y);if(void 0===e)throw Error("useGame must be used within a GameProvider");return e}function E(e){return 1===e?"st":2===e?"nd":3===e?"rd":"th"}},3829:(e,a,t)=>{t.d(a,{L6:()=>l,Ld:()=>i,U_:()=>o,Ul:()=>r,Zd:()=>s,ne:()=>c,sN:()=>d,xw:()=>n,zy:()=>u});let l={deckCount:6,blackjackPayout:1.5,dealerStandsOnSoft17:!0,allowSurrender:!0,allowDoubleAfterSplit:!0,minimumBet:5,maximumBet:1e3,volume:.5,autoStandOn21:!0,keepBetBetweenRounds:!0},r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,a=["hearts","diamonds","clubs","spades"],t=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],l=[];for(let r=0;r<e;r++)for(let e of a)for(let a of t)l.push({suit:e,rank:a,faceUp:!0});for(let e=l.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1));[l[e],l[a]]=[l[a],l[e]]}return l},n=function(e){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(0===e.length)throw Error("Deck is empty");let t=[...e];return[{...t.pop(),faceUp:a},t]},s=e=>{let a=0,t=0,l=!1;return e.cards.forEach(e=>{e.faceUp&&("A"===e.rank?t+=1:["J","Q","K"].includes(e.rank)?a+=10:a+=parseInt(e.rank))}),t>0&&(a+11+(t-1)<=21?(a+=11+(t-1),l=!0):a+=t),{total:a,isSoft:l}},c=e=>{if(2!==e.cards.length)return!1;let{total:a}=s(e);return 21===a},o=e=>{let{total:a}=s(e);return a>21},u=e=>{if(2!==e.cards.length)return!1;let[a,t]=e.cards;return a.rank===t.rank},d=(e,a,t)=>2===e.cards.length&&!(a<e.bet)&&(!e.isSplit||!t||!!t.allowDoubleAfterSplit),i=(e,a,t)=>{let l=s(e).total,r=s(a).total;return l>21?{result:"lose",payout:0}:r>21?{result:"win",payout:2*e.bet}:c(e)&&!c(a)?{result:"blackjack",payout:e.bet*(1+t.blackjackPayout)}:!c(e)&&c(a)?{result:"lose",payout:0}:c(e)&&c(a)?{result:"push",payout:e.bet}:l>r?{result:"win",payout:2*e.bet}:l<r?{result:"lose",payout:0}:{result:"push",payout:e.bet}}}}]);