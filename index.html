<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Blackjack Game</title>
    <style>
        body {
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', Arial, sans-serif;
            background: #006400;
            color: white;
            text-align: center;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 50, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: #004d00;
            border-radius: 5px;
        }

        .hand {
            min-height: 150px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 80, 0, 0.5);
            border-radius: 5px;
        }

        .card {
            display: inline-block;
            width: 80px;
            height: 120px;
            margin: 5px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            color: black;
            font-weight: bold;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            position: relative;
        }

        .card.red {
            color: #cc0000;
        }

        .card-value {
            font-size: 1.4em;
            position: absolute;
        }

        .card-suit {
            font-size: 2.5em;
            position: absolute;
            bottom: 5px;
            right: 5px;
        }

        .dealer-hand .card:first-child.hidden {
            background: #2d572c;
            color: transparent;
            position: relative;
            overflow: hidden;
        }

        .dealer-hand .card.hidden::after {
            content: "?";
            color: white;
            font-size: 2em;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .controls {
            margin: 20px 0;
        }

        button {
            padding: 12px 25px;
            margin: 0 10px;
            border: none;
            border-radius: 5px;
            background: goldenrod;
            color: #006400;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            background: #ffd700;
            transform: scale(1.05);
        }

        button:disabled {
            background: #666;
            color: #999;
            cursor: not-allowed;
            transform: none;
        }

        #status {
            min-height: 30px;
            margin: 15px 0;
            font-size: 1.2em;
            font-weight: bold;
            color: #ffd700;
        }

        .rules {
            text-align: left;
            margin: 20px auto;
            max-width: 600px;
            background: rgba(0, 50, 0, 0.6);
            padding: 15px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>♠️♥️ Blackjack ♦️♣️</h1>
        
        <div class="score-board">
            <div>Dealer's Score: <span id="dealer-score">0</span></div>
            <div>Player's Score: <span id="player-score">0</span></div>
        </div>

        <div class="hand dealer-hand">
            <h2>Dealer's Hand</h2>
            <div id="dealer-cards"></div>
        </div>

        <div class="hand player-hand">
            <h2>Player's Hand</h2>
            <div id="player-cards"></div>
        </div>

        <div id="status"></div>

        <div class="controls">
            <button id="hit-btn" onclick="playerHit()">Hit</button>
            <button id="stand-btn" onclick="playerStand()">Stand</button>
            <button id="new-game-btn" onclick="newGame()">New Game</button>
        </div>

        <div class="rules">
            <h3>Game Rules:</h3>
            <ul>
                <li>Dealer must hit on soft 17</li>
                <li>Blackjack pays 3:2</li>
                <li>Double down available on initial two cards</li>
                <li>No insurance or splitting in this version</li>
                <li>Dealer's first card is hidden until stand</li>
            </ul>
        </div>
    </div>

    <script>
        // Game state object
        let gameState = {
            deck: [],
            playerHand: [],
            dealerHand: [],
            gameActive: false,
            playerScore: 0,
            dealerScore: 0,
            roundsPlayed: 0
        };

        // Card creation and deck management
        function createDeck() {
            const suits = ['♠', '♣', '♥', '♦'];
            const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
            const deck = [];

            for (let suit of suits) {
                for (let value of values) {
                    deck.push({
                        suit: suit,
                        value: value,
                        numericValue: getNumericValue(value),
                        colorClass: (suit === '♥' || suit === '♦') ? 'red' : ''
                    });
                }
            }
            return shuffleDeck([...deck, ...deck, ...deck, ...deck]); // 6 decks
        }

        function shuffleDeck(deck) {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            return deck;
        }

        function getNumericValue(value) {
            if (['J', 'Q', 'K'].includes(value)) return 10;
            if (value === 'A') return 11; // Initial value, handled in score calculation
            return parseInt(value);
        }

        // Game logic
        function calculateScore(hand) {
            let score = hand.reduce((total, card) => total + card.numericValue, 0);
            let soft = false;
            
            // Handle aces
            const aces = hand.filter(card => card.value === 'A');
            while (score > 21 && aces.length > 0) {
                score -= 10;
                aces.pop();
                soft = true;
            }
            
            return { total: score, soft: soft };
        }

        function dealCard(hand, isHidden = false) {
            if (gameState.deck.length < 15) {
                gameState.deck = createDeck();
                setStatus('Shuffling new deck...');
            }
            
            const card = gameState.deck.pop();
            if (isHidden) card.hidden = true;
            hand.push(card);
            updateDisplay();
        }

        // Display functions
        function updateDisplay() {
            // Dealer's hand
            const dealerCards = document.getElementById('dealer-cards');
            dealerCards.innerHTML = '';
            gameState.dealerHand.forEach((card, index) => {
                if (index === 0 && gameState.gameActive && !gameState.dealerRevealed) {
                    createCardElement(card, true).forEach(el => dealerCards.appendChild(el));
                } else {
                    createCardElement(card).forEach(el => dealerCards.appendChild(el));
                }
            });

            // Player's hand
            const playerCards = document.getElementById('player-cards');
            playerCards.innerHTML = '';
            gameState.playerHand.forEach(card => {
                createCardElement(card).forEach(el => playerCards.appendChild(el));
            });

            // Scores
            const dealerScore = gameState.gameActive && !gameState.dealerRevealed 
                ? calculateScore([gameState.dealerHand[0]]).total
                : calculateScore(gameState.dealerHand).total;
            
            document.getElementById('dealer-score').textContent = dealerScore;
            document.getElementById('player-score').textContent = calculateScore(gameState.playerHand).total;

            // Update button states
            document.getElementById('hit-btn').disabled = !gameState.gameActive;
            document.getElementById('stand-btn').disabled = !gameState.gameActive;
        }

        function createCardElement(card, isHidden = false) {
            if (isHidden) {
                const hiddenDiv = document.createElement('div');
                hiddenDiv.className = 'card hidden';
                return [hiddenDiv];
            }

            const cardDiv = document.createElement('div');
            cardDiv.className = `card ${card.colorClass}`;
            
            const valueTop = document.createElement('div');
            valueTop.className = 'card-value';
            valueTop.textContent = card.value;
            
            const suit = document.createElement('div');
            suit.className = 'card-suit';
            suit.textContent = card.suit;
            
            const valueBottom = document.createElement('div');
            valueBottom.className = 'card-value';
            valueBottom.style.transform = 'rotate(180deg)';
            valueBottom.style.bottom = '5px';
            valueBottom.style.left = '5px';
            valueBottom.textContent = card.value;

            cardDiv.appendChild(valueTop);
            cardDiv.appendChild(suit);
            cardDiv.appendChild(valueBottom);
            
            return [cardDiv];
        }

        function setStatus(message) {
            document.getElementById('status').textContent = message;
        }

        // Game flow control
        function newGame() {
            gameState.deck = createDeck();
            gameState.playerHand = [];
            gameState.dealerHand = [];
            gameState.gameActive = true;
            gameState.dealerRevealed = false;

            // Initial deal
            dealCard(gameState.playerHand);
            dealCard(gameState.dealerHand, true);
            dealCard(gameState.playerHand);
            dealCard(gameState.dealerHand);

            // Check for natural blackjack
            const playerScore = calculateScore(gameState.playerHand);
            const dealerScore = calculateScore(gameState.dealerHand);

            if (playerScore.total === 21 && dealerScore.total === 21) {
                endGame('Push! Both have Blackjack!');
            } else if (playerScore.total === 21) {
                endGame('Blackjack! Player wins!');
            } else if (dealerScore.total === 21) {
                endGame('Dealer has Blackjack!');
            }

            updateDisplay();
        }

        function playerHit() {
            if (!gameState.gameActive) return;
            
            dealCard(gameState.playerHand);
            const score = calculateScore(gameState.playerHand);
            
            if (score.total > 21) {
                endGame('Player busts! Dealer wins!');
            } else if (score.total === 21) {
                playerStand();
            }
        }

        function playerStand() {
            gameState.gameActive = false;
            gameState.dealerRevealed = true;
            dealerTurn();
        }

        function dealerTurn() {
            let dealerScore = calculateScore(gameState.dealerHand);
            
            while (dealerScore.total < 17 || (dealerScore.total === 17 && dealerScore.soft)) {
                dealCard(gameState.dealerHand);
                dealerScore = calculateScore(gameState.dealerHand);
            }

            determineWinner();
        }

        function determineWinner() {
            const playerScore = calculateScore(gameState.playerHand);
            const dealerScore = calculateScore(gameState.dealerHand);
            
            let message = '';
            if (playerScore.total > 21) {
                message = 'Player busts! Dealer wins!';
            } else if (dealerScore.total > 21) {
                message = 'Dealer busts! Player wins!';
            } else if (playerScore.total > dealerScore.total) {
                message = 'Player wins!';
            } else if (dealerScore.total > playerScore.total) {
                message = 'Dealer wins!';
            } else {
                message = 'Push!';
            }
            
            endGame(message);
        }

        function endGame(message) {
            gameState.gameActive = false;
            gameState.dealerRevealed = true;
            setStatus(message);
            updateDisplay();
        }

        // Initialize game
        document.addEventListener('DOMContentLoaded', () => {
            newGame();
        });
    </script>
</body>
</html>